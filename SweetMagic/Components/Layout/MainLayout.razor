@inherits LayoutComponentBase
@using SweetMagic.Models
@inject NavigationManager NavigationManager

<div class="page">
    <main>
        <div class="background-image"></div>
        <div class="@navBarStatus">
            <div class="mainLogo">
                <img class="logo" width="100" height="60" src="assets/images/logo.png" alt="Sweet Magic Logo" />
            </div>
            <div class="navBtnDiv">
                <nav class="navbar">
                    <ul class="ulnavbar">
                        <li>
                            <button class="nav-btn">Criar Bolo</button>
                        </li>
                        <li>
                            <button class="nav-btn">Meus bolos</button>
                        </li>

                    </ul>
                </nav>
            </div>
            <div class="mainHeaderDiv">
                <h1 id="header">@_pageName</h1>
            </div>
            <div class="logoutDiv">
                <ul class="ulLogout">
                    <li>
                        <button class="logout-btn" @onclick="loggedOut">Sair</button>
                    </li>
                </ul>
            </div>
        </div>
        <article class="content">
            <CascadingValue Value="this">
                @Body
            </CascadingValue>
        </article>
    </main>
</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

@code {
    private string navBarStatus { get; set; } = "top-row-disabled";
    private string _pageName { get; set; } = "Sweet Magic";
    public User currentUser;

    public void loggedIn() {
        navBarStatus = "top-row-visible";
        NavigationManager.NavigateTo("/history");
        StateHasChanged();
        return;
    }

    public void loggedOut() {
        currentUser = null;
        navBarStatus = "top-row-disabled";
        NavigationManager.NavigateTo("/");
        StateHasChanged();
        return;
    }

    public string setPageName(string pageName) {
        _pageName = pageName;
        StateHasChanged();
        return pageName;
    }

}